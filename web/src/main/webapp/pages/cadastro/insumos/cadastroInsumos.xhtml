<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fw="http://xmlns.jcp.org/jsf/composite/forwardcomponents"
	template="../../../layout/template.xhtml">
	<ui:define name="content">

		<h:outputText value="#{msgs['menu.cadastro.insumos']}" />

		<fw:formSearch bean="#{insumoBean}" idt="formSearch">
			<p:panelGrid layout="grid" columns="3">

				<fw:inputNumber idt="codigoIns" label="#{msgs['campo.codigo']}"
					value="#{insumoBean.insumoVO.codigoInsumo}" />

				<fw:inputText idt="nomeIns" label="#{msgs['campo.nome']}"
					value="#{insumoBean.insumoVO.nomeInsumo}" />

				<fw:inputText idt="descIns" label="#{msgs['campo.descricao']}"
					value="#{insumoBean.insumoVO.descricaoInsumo}" />

				<fw:inputText idt="numSerIns" label="#{msgs['campo.numero.serie']}"
					value="#{insumoBean.insumoVO.numeroSerie}" />


				<h:selectOneMenu value="#{insumoBean.insumoVO.codigoCategoriaInsumo}"
					id="comboCategoriaInsumo">
					<f:selectItem noSelectionOption="true" 
						itemLabel="#{msgs['campo.categoria.insumo']}" />
					<f:selectItem noSelectionOption="true" 
						itemLabel="#{msgs['legenda.selecione']}" />
					<f:selectItems value="#{insumoBean.listaCategoriaInsumo}"
						var="categoriaInsumo" itemValue="#{categoriaInsumo}"
						itemLabel="#{categoriaInsumo.nomeCategoria}" />
				</h:selectOneMenu>

			</p:panelGrid>
		</fw:formSearch>

		<fw:formPanel bean="#{insumoBean}" idt="formInsumo"
			idGrid="form:gridInsumo">
			<p:panelGrid layout="grid" columns="3">

				<fw:inputText idt="nomeIns" label="#{msgs['campo.nome']}"
					value="#{insumoBean.insumoVO.nomeInsumo}" />

				<fw:inputText idt="descIns" label="#{msgs['campo.descricao']}"
					value="#{insumoBean.insumoVO.descricaoInsumo}" />

				<fw:inputText idt="numSerIns" label="#{msgs['campo.numero.serie']}"
					value="#{insumoBean.insumoVO.numeroSerie}" />
				
				<fw:inputNumber idt="vlrMerc" label="#{msgs['campo.valor.mercado']}" mask="999.999.999,99
					value="#{insumoBean.insumoVO.valorMercado}" />
				
				<fw:inputText idt="numSerIns" label="#{msgs['campo.numero.serie']}"
					value="#{insumoBean.insumoVO.numeroSerie}" />

				<h:selectOneMenu value="#{insumoBean.insumoVO.codigoCategoriaInsumo}"
					id="categoriaInsumo">
					<f:selectItem noSelectionOption="true" itemValue="0"
						itemLabel="#{msgs['campo.categoria.insumo']}" />
					<f:selectItem noSelectionOption="true" itemValue="0"
						itemLabel="#{msgs['legenda.selecione']}" />
					<f:selectItems value="#{insumoBean.listaCategoriaInsumo}"
						var="categoriaInsumo" itemValue="#{categoriaInsumo.codigoCategoria}"
						itemLabel="#{categoriaInsumo.nomeCategoria}" />
				</h:selectOneMenu>

			</p:panelGrid>
		</fw:formPanel>
		<!-- 		GRID -->
		<p:panel id="gridInsumo" styleClass="pn_grid pn_buttons">
			<f:facet name="header">
				<p:commandLink id="bt_adicionar"
					actionListener="#{insumoBean.showForm}" update="form">
					<h:graphicImage value="/img/bt/add.png" alt="Adicionar" />
					<p:tooltip trackMouse="true" for="bt_adicionar">
						<h:outputText value="#{msgs['button.adicionar']}" />
					</p:tooltip>
				</p:commandLink>
			</f:facet>
			<fw:dataGrid id="listaInsumo" resultList="#{insumoBean.resultList}"
				bean="#{insumoBean}">
				<p:column headerText="#{msgs['campo.codigo']}"
					styleClass="cl_codigo" filterBy="#{value.codigoInsumo}">
					<h:outputText value="#{value.codigoInsumo}" />
				</p:column>
				<p:column headerText="#{msgs['campo.nome']}"
					filterBy="#{value.nomeInsumo}">
					<h:outputText value="#{value.nomeInsumo}" />
				</p:column>
				<p:column headerText="#{msgs['campo.descricao']}"
					filterBy="#{value.nomeInsumo}">
					<h:outputText value="#{value.descricaoInsumo}" />
				</p:column>
				<p:column styleClass="cl_actions">
					<p:commandLink actionListener="#{insumoBean.showForm}"
						update="form">
						<f:setPropertyActionListener value="#{value}"
							target="#{insumoBean.insumoVO}" />
						<h:graphicImage title="#{msgs['button.editar']}"
							value="/img/bt/edit.png" />
					</p:commandLink>
				</p:column>
				<p:column styleClass="cl_actions">
					<p:commandLink action="#{insumoBean.excluir}" update="listaInsumo">
						<f:setPropertyActionListener value="#{value}"
							target="#{insumoBean.insumoVO}" />
						<h:graphicImage title="#{msgs['button.excluir']}"
							value="/img/bt/delete.png" />
					</p:commandLink>
				</p:column>

			</fw:dataGrid>
		</p:panel>
	</ui:define>
</ui:composition>