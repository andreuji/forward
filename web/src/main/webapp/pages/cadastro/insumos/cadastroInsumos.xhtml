<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fw="http://xmlns.jcp.org/jsf/composite/forwardcomponents"
	template="../../../layout/template.xhtml">
	<ui:define name="content">

		<h:outputText value="#{msgs['menu.cadastro.insumos']}" />

		<fw:formSearch bean="#{insumoBean}" idt="formSearch">
			<p:panelGrid layout="grid" columns="4">
				<h:selectOneMenu
					value="#{insumoBean.insumoVO.categoriaInsumoVO.codigoCategoria}"
					id="comboCategoriaInsumo">
					<f:selectItem noSelectionOption="true"
						itemLabel="#{msgs['campo.categoria.insumo']}" />
					<f:selectItem noSelectionOption="true"
						itemLabel="#{msgs['legenda.selecione']}" />
					<f:selectItems value="#{insumoBean.listaCategoriaInsumo}"
						var="categoriaInsumo"
						itemValue="#{categoriaInsumo.codigoCategoria}"
						itemLabel="#{categoriaInsumo.nomeCategoria}" />
				</h:selectOneMenu>

				<fw:inputText idt="nomeIns" label="#{msgs['campo.nome']}"
					value="#{insumoBean.insumoVO.nomeInsumo}" />

				<fw:inputText idt="descIns" label="#{msgs['campo.descricao']}"
					value="#{insumoBean.insumoVO.descricaoInsumo}" />

				<fw:inputText idt="numSerIns" label="#{msgs['campo.numero.serie']}"
					value="#{insumoBean.insumoVO.numeroSerie}" />

				<h:selectOneMenu
					value="#{insumoBean.insumoVO.unidadeVO.codigoUnidade}" id="unidade">
					<f:selectItem noSelectionOption="true"
						itemLabel="#{msgs['campo.unidade']}" />
					<f:selectItem noSelectionOption="true"
						itemLabel="#{msgs['legenda.selecione']}" />
					<f:selectItems value="#{insumoBean.listaUnidades}" var="unidade"
						itemValue="#{unidade.codigoUnidade}"
						itemLabel="#{unidade.siglaUnidade} - #{unidade.nomeUnidade} " />
				</h:selectOneMenu>
			</p:panelGrid>
			<p:panelGrid layout="grid" columns="4">

				<p:outputLabel value="#{msgs['campo.valor.mercado']}" />

				<fw:inputText idt="vlrMercDe" label="#{msgs['campo.De']}"
					value="#{insumoBean.insumoVO.valorMercadoDe}" />

				<fw:inputText idt="vlrMercAte" label="#{msgs['campo.Ate']}"
					value="#{insumoBean.insumoVO.valorMercadoAte}" />

			</p:panelGrid>
			<p:panelGrid layout="grid" columns="4">

				<p:outputLabel value="#{msgs['campo.valor.venda']}" />

				<fw:inputText idt="vlrVendaDe" label="#{msgs['campo.De']}"
					value="#{insumoBean.insumoVO.valorVendaDe}" />

				<fw:inputText idt="vlrVendaAte" label="#{msgs['campo.Ate']}"
					value="#{insumoBean.insumoVO.valorVendaAte}" />

			</p:panelGrid>
		</fw:formSearch>

		<fw:formPanel bean="#{insumoBean}" idt="formInsumo"
			idGrid="form:gridInsumo">
			<p:panelGrid layout="grid" columns="4">
				<h:selectOneMenu
					value="#{insumoBean.insumoVO.categoriaInsumoVO.codigoCategoria}"
					id="comboCategoriaInsumo">
					<f:selectItem noSelectionOption="true"
						itemLabel="#{msgs['campo.categoria.insumo']}" />
					<f:selectItem noSelectionOption="true"
						itemLabel="#{msgs['legenda.selecione']}" />
					<f:selectItems value="#{insumoBean.listaCategoriaInsumo}"
						var="categoriaInsumo"
						itemValue="#{categoriaInsumo.codigoCategoria}"
						itemLabel="#{categoriaInsumo.nomeCategoria}" />
				</h:selectOneMenu>

				<fw:inputText idt="nomeIns" label="#{msgs['campo.nome']}"
					value="#{insumoBean.insumoVO.nomeInsumo}" />

				<fw:inputText idt="descIns" label="#{msgs['campo.descricao']}"
					value="#{insumoBean.insumoVO.descricaoInsumo}" />

				<fw:inputText idt="numSerIns" label="#{msgs['campo.numero.serie']}"
					value="#{insumoBean.insumoVO.numeroSerie}" />

				<fw:inputText idt="vlrMerc" label="#{msgs['campo.valor.mercado']}"
					value="#{insumoBean.insumoVO.valorMercado}" />

				<fw:inputText idt="vlrVenda" label="#{msgs['campo.valor.venda']}"
					value="#{insumoBean.insumoVO.valorVenda}" />


				<h:selectOneMenu
					value="#{insumoBean.insumoVO.unidadeVO.codigoUnidade}" id="unidade">
					<f:selectItem noSelectionOption="true"
						itemLabel="#{msgs['campo.unidade']}" />
					<f:selectItem noSelectionOption="true"
						itemLabel="#{msgs['legenda.selecione']}" />
					<f:selectItems value="#{insumoBean.listaUnidades}" var="unidade"
						itemValue="#{unidade.codigoUnidade}"
						itemLabel="#{unidade.siglaUnidade} - #{unidade.nomeUnidade} " />
				</h:selectOneMenu>

				<p:commandButton action="#{insumoBean.carregarSubItensInsumo()}" oncomplete="PF('wModalForm').show()" type="button"
					value="#{msgs['titulo.subitem']}" />

			</p:panelGrid>
		</fw:formPanel>
		<!-- 		GRID -->
		<p:panel id="gridInsumo" styleClass="pn_grid pn_buttons">
			<f:facet name="header">
				<p:commandLink id="bt_adicionar"
					actionListener="#{insumoBean.showForm}" update="form">
					<h:graphicImage value="/img/bt/add.png" alt="Adicionar" />
					<p:tooltip trackMouse="true" for="bt_adicionar">
						<h:outputText value="#{msgs['button.adicionar']}" />
					</p:tooltip>
				</p:commandLink>
			</f:facet>
			<fw:dataGrid id="listaInsumo" resultList="#{insumoBean.resultList}"
				bean="#{insumoBean}">
				<p:column headerText="#{msgs['campo.codigo']}"
					styleClass="cl_codigo" filterBy="#{value.codigoInsumo}">
					<h:outputText value="#{value.codigoInsumo}" />
				</p:column>
				<p:column headerText="#{msgs['campo.nome']}"
					filterBy="#{value.nomeInsumo}">
					<h:outputText value="#{value.nomeInsumo}" />
				</p:column>
				<p:column headerText="#{msgs['campo.descricao']}"
					filterBy="#{value.nomeInsumo}">
					<h:outputText value="#{value.descricaoInsumo}" />
				</p:column>
				<p:column headerText="#{msgs['campo.numero.serie']}"
					styleClass="cl_codigo" filterBy="#{value.numeroSerie}">
					<h:outputText value="#{value.numeroSerie}" />
				</p:column>
				<p:column headerText="#{msgs['campo.valor.mercado']}"
					filterBy="#{value.valorMercado}">
					<h:outputText value="#{value.valorMercado}" />
				</p:column>
				<p:column headerText="#{msgs['campo.valor.venda']}"
					filterBy="#{value.valorVenda}">
					<h:outputText value="#{value.valorVenda}" />
				</p:column>
				<p:column headerText="#{msgs['campo.categoria.insumo']}"
					filterBy="#{value.categoriaInsumoVO.nomeCategoria}">
					<h:outputText value="#{value.categoriaInsumoVO.nomeCategoria}" />
				</p:column>
				<p:column headerText="#{msgs['campo.unidade']}"
					filterBy="#{value.unidadeVO.siglaUnidade}">
					<h:outputText value="#{value.unidadeVO.siglaUnidade}" />
				</p:column>
				<p:column styleClass="cl_actions">
					<p:commandLink actionListener="#{insumoBean.showForm}"
						update="form">
						<f:setPropertyActionListener value="#{value}"
							target="#{insumoBean.insumoVO}" />
						<h:graphicImage title="#{msgs['button.editar']}"
							value="/img/bt/edit.png" />
					</p:commandLink>
				</p:column>
				<p:column styleClass="cl_actions">
					<p:commandLink action="#{insumoBean.excluir}" update="listaInsumo">
						<f:setPropertyActionListener value="#{value}"
							target="#{insumoBean.insumoVO}" />
						<h:graphicImage title="#{msgs['button.excluir']}"
							value="/img/bt/delete.png" />
					</p:commandLink>
				</p:column>

			</fw:dataGrid>
		</p:panel>

		<ui:include src="/pages/cadastro/insumos/modalSubItemInsumo.xhtml" />

	</ui:define>
</ui:composition>